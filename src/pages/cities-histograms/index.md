---
title: Исследователь из США придумал удивительную визуализацию, объясняющую устройство городов. А Медуза с ее помощью посмотрела на российские. А я — на города Пермского края
date: "2018-07-16T00:00:00.000Z"
---

Прочитал на Медузе [материал](https://meduza.io/shapito/2018/07/14/issledovatel-iz-ssha-pridumal-udivitelnuyu-vizualizatsiyu-ob-yasnyayuschuyu-ustroystvo-gorodov-a-my-s-ee-pomoschyu-posmotreli-na-rossiyskie) про то, как направлены улицы в различных городах мира. В статье несколько гистограмм крупных городов США и мира. Эти графики показывают, насколько удобно ориентироваться в городе. Больше улиц в определенном направлении — длиннее линия. «Уже» гистограмма — строже порядок улиц в городе.

![Все города](./images/AllCities.png)

![Детроит](./images/Detroit.png)

Не удержался, попробовал визуализировать тоже.

Я взял 6 городов Пермского края, зашел на гитхаб автора гистограмм и немного покопался в его программе [OSMnx](https://github.com/gboeing/osmnx). Джефф Боинг использует свободный картографический сервис [OpenStreetMap](https://ru.wikipedia.org/wiki/OpenStreetMap), находит города (можно загружать списком!) и проходит по каждой улице. Если она идет с севера на юг, добавляет определенный вес южному направлению. И так со всеми улицами во всех городах.

В [репозитории](https://github.com/gboeing/osmnx-examples/tree/master/notebooks) лежат примеры использования. Раньше я не имел дело с [Jupyter Notebook](http://jupyter.org), сейчас пришлось разобраться.

Итог:

![Пермь](./images/Perm.jpg)

![Краснокамск](./images/Krasnokamsk.jpg)

![Соликамск](./images/Solikamsk.jpg)

![Губаха](./images/Gubaha.jpg)

![Кунгур](./images/Kungur.jpg)

![Лысьва](./images/Lysva.jpg)

У меня возникла сложность с поиском некоторых городов. Например, я не смог построить карты для Чусового и Березников, потому что по запросам `"Chusovoy, Perm Krai, Russian Federation"` и `"Berezniki, Perm Krai, Russian Federation"` OpenStreetMap возвращал точку, а не полигон. 

В [обсуждении на гитхабе](https://github.com/gboeing/osmnx/issues/16) есть решение этой проблемы, но мне не удалось применить их для функции `osmnx.gdf_from_places`. Не знаю, куда тут вставлять доп. параметры, да и OpenStreetMap возвращает только точку, а не несколько вариантов, из которых можно было бы выбрать.

 --------

Сделал для себя и [Интернет-издания «Дзе»](https://vk.com/feed?w=wall-151624664_3305).